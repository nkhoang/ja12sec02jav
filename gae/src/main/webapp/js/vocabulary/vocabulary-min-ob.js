function VocabularyManager(){var c=new Array();var a;this.addListener=b;function b(e){var f=false;$.each(c,function(g){if(g===e){f=true;return}});if(!f){c.push(e)}}this.fireListener=d;function d(){$.each(c,function(e,g){g(a)})}this.clearAll=function(){$("#display-pnl").empty();$("#display-pnl").activity({segments:12,width:7.5,space:6,length:13,color:"#252525",speed:1.5});$("#nav-border-hider").empty();$("#pnl-left *").hide();$("#pnl-nav").empty()};this.processWord=function(g,e){var j=new Date().getTime();var h="?ts="+j;$("#display-pnl").empty();var i=$("<div></div>");i.setTemplateURL(e.navInfoTpl+h);i.processTemplate(g.data.oxford);$("#pnl-nav").append(i);$("#nav-border-hider").append($('<div class="nav-border-hider-section"></div>'));for(var l in g.data){var n=$("<div></div>").addClass(l);var f=$("<div></div>");var k=$("<div></div>");n.setTemplateURL(e.wordTpl+h);n.processTemplate(g.data[l]);f.setTemplateURL(e.wordKindTpl+h);f.processTemplate(g.data[l]);k.setTemplateURL(e.navHiderTpl+h);k.processTemplate(g.data[l]);$("#display-pnl").append(n.html());$("#pnl-left *").show();$("#pnl-nav").append(f);$("#nav-border-hider").append(k.html());$(".w-k-t").waypoint(function(p,r){var o=$(this).parents(".section")[0].className;if(o.indexOf("section_")!=-1){var q=o.substring(o.indexOf("section_")+"section_".length);$(".cnt-nav-lnk").removeClass("active");$($(".cnt-nav-lnk")[q]).addClass("active")}},{offset:0})}var m=$("#pnl-nav").find(".cnt-nav-lnk");$(m[m.length-1]).addClass("last")}}function displayUserPanel(a,b){$.ajax({url:b,type:"GET",dataType:"html",success:function(c){$(a).html(c)},error:function(){var c=$("<div></div>").html("An error occurred. Please try again later.");c.dialog({autoOpen:true})}})}function showFailMessage(c,a){var b=$('<div title="'+c+'"></div>').html(a);b.dialog({modal:true,buttons:{Close:function(){b.dialog("close")}}})}function showSuccessMessage(a,c){var b=$("<div></div>").html("Welcome "+a.userName+", you are logged in successfully!!");b.dialog({modal:true,buttons:{Close:function(){b.dialog("close")}}});c()}function openLoginDialog(){$("#login-form").dialog("open")}function submitNewWord(d,b,a,c){$.ajax({url:a,type:"GET",data:{word:d,updateIfNeed:b},dataType:"json",beforeSend:function(){$("#search-input").val($("#search-input").val().trim())},success:function(e){global_pageManager.processWord(e,c);$("#w-d-sound").click();$("#display-pnl").pageScroller({navigation:"#pnl-nav",scrollOffset:0})},error:function(){alert("Could not lookup requested word. Server error. Please try again later.")}})}function processRecentWords(d){var g=d.words;$(".recent-ws").empty();for(var b=0;b<g.length;b++){var e=g[b];var f=$('<div class="w-recent"></div>');var a=$('<span class="w-time"></span>').html(" ("+e.currentTime+")");var c=$('<a href="#" />').append(e.description);c.append(a);c.attr("onclick",'lookupWord("'+e.description+'"); return false;');f.append(c);$(".recent-ws").append(f)}};